# Singlish Words Backend

## Packages:

* router: routers;
* controller: parameters validation;
* dao: database access;
* cache: wrap the redis;
* model: data model;
* config: config reader;
* docs: autogenerated by swag tools, the API documents;
* service: wrapped db layer, query/set/del/etc...;
* sql: original sql files, for initialize the db;

## Usage

### To build

#### Use Make (recommended)

provide several commands,

##### To run it

```bash
make run
```

##### To build

```bash
make build
```

##### To build windows/linux only

```bash
make windows
# or
make linux
```

### Use go build

```bash
go build main.go
# or if you just want to run it
go run main.go
```

After build, remember to **copy config file** `config.yaml` to the folder where the executable file is.

## API documents

Default, the API documents are generated by swag tools. You can set the url path by modify the config files. For more information, see below.

Normally, a path would be: [http://localhost:8080/_/swagger/index.html#/](http://localhost:8080/_/swagger/index.html#/)

## Config

This app uses viper to read/set configs. The config format is yaml.

```yaml
app: # the configs for this app
  addr: :8080     # the address
  mode: release   # release or debug
mysql:
  host: xxx  # mysql host
  user: xxx  # mysql username
  dbname: singlishwords  # mysql database name
  password: xxx # mysql password
  options:
    - parseTime=True # some options of mysql dsn
redis:  # redis information
  host: localhost:6379 
  password:
  db: 0
swagger:  # swagger API documents
  enable: true  # true or false
  path: /_/swagger/*any # the default swagger path, only work if enable=true
```
